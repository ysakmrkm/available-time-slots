{"version":3,"file":"main.js","sourceRoot":"../../src/cs/","sources":["main.coffee"],"names":[],"mappings":"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","sourcesContent":["###\navailable-time-slots\n\nCopyright (c) 2022 Yoshiaki Murakami(https://github.com/ysakmrkm)\n\nThis software is released under the MIT License.\nhttp://opensource.org/licenses/mit-license.php\n###\n\nclass AvailableTimeSlots\n  constructor: (target, options)->\n    @prevHtml = '<div id=\"ats-prev-week\" class=\"ats-nav__item ats-nav__item__prev\"><</div>'\n    @nextHtml = '<div id=\"ats-next-week\" class=\"ats-nav__item ats-nav__item__next\">></div>'\n    @defaults = {\n      availabileTimeSlotResource: '',\n      availabileTimeSlots: [[], [], [], [], [], [], []],\n      isMultiple: false\n      navigation: true\n      prevElem: ''\n      nextElem: ''\n      selectedDates: []\n      startDate: new Date()\n      endDate: ''\n      slotMinTime: '00:00'\n      slotMaxTime: '24:00'\n      slotSpan: 30\n      businessHours: [0,  23]\n      locale: 'en'\n      scrollable: false\n      resizable: false,\n      calendar: false\n      view: 'availableTimeSlots'\n      iconFilePath: './image/'\n      iconCalendar: {\n        fileName: 'calendar.svg',\n        width: 40,\n        height: 40\n      },\n      iconCross: {\n        fileName: 'cross.svg',\n        width: 20,\n        height: 20\n      },\n      iconCircle: {\n        fileName: 'circle.svg',\n        width: 20,\n        height: 20\n      },\n      displayAvailableCount: false,\n      displayDateCount: 7,\n      onClickTimeSlot: ()->\n      onClickNavigator: ()->\n      initDatePicker: ()->\n      destroyDatePicker: ()->\n    }\n    @settings = Object.assign({}, @defaults, options)\n    @defaultNav = true\n\n    @target = target\n\n    if @settings.prevElem is ''\n      dom = document.createElement('div')\n      dom.innerHTML = @prevHtml\n      @prevElem = dom.firstChild\n    else if typeof @settings.prevElem is 'string'\n      @prevElem = document.querySelector(@settings.prevElem)\n      @defaultNav = false\n\n    if @settings.nextElem is ''\n      dom = document.createElement('div')\n      dom.innerHTML = @nextHtml\n      @nextElem = dom.firstChild\n    else if typeof @settings.nextElem is 'string'\n      @nextElem = document.querySelector(@settings.nextElem)\n      @defaultNav = false\n\n    @settings.startDate.setHours(0, 0, 0)\n    @initialStartDate = @settings.startDate\n\n    slotBaseTime = new Date()\n    slotBaseTime.setHours(0, 0, 0, 0)\n\n    slotMinTime = new Date()\n    slotMinTimeArray = @settings.slotMinTime.replace(/0+(?=[0-9])/g, '').split(':')\n    slotMinTime.setHours(slotMinTimeArray[0], slotMinTimeArray[1], 0, 0)\n\n    slotMaxTime = new Date()\n    slotMaxTimeArray = @settings.slotMaxTime.replace(/0+(?=[0-9])/g, '').split(':')\n    slotMaxTime.setHours(slotMaxTimeArray[0], slotMaxTimeArray[1], 0, 0)\n\n    if typeof @settings.businessHours[0] is 'number' or 'string'\n      @businessHours = [[@settings.businessHours[0], 0, 0, 0], [@settings.businessHours[1], 0, 0, 0]]\n\n    if typeof @settings.businessHours[0] is 'object'\n      @settings.businessHours.forEach((elem, index)=>\n        if @settings.businessHours.length >= 7\n          @businessHours[index] = []\n\n          elem.forEach((elem2, index2)=>\n            @businessHours[index][index2] = [[elem2[0], 0, 0, 0], [elem2[1], 0, 0, 0]]\n          )\n        else\n          @businessHours[index] = [[elem[0], 0, 0, 0], [elem[1], 0, 0, 0]]\n      )\n\n    @startNum = Math.floor((slotMinTime.getTime() - slotBaseTime.getTime()) / (1000 * 60)) / @settings.slotSpan\n    @endNum = Math.floor((slotMaxTime.getTime() - slotBaseTime.getTime()) / (1000 * 60)) / @settings.slotSpan\n    @localeData = locales.find((u)=> u.code is @settings.locale)\n    @daysPerWeek = 7\n    @timeSlotSourceType = ''\n\n  setDate: (days)->\n    date = new Date(@settings.startDate.valueOf())\n    date.setDate(date.getDate() + days)\n    return date\n\n  getYearName: (year)->\n    switch @localeData.code\n      when 'ja'\n        return year + '年'\n      else\n        return year\n\n  getMonthName: (index)->\n    switch @localeData.code\n      when 'ja'\n        return @localeData.months[index]\n      else\n        return @localeData.months[index]\n\n  getWeekdayName: (index)->\n    switch @localeData.code\n      when 'ja'\n        return '（' + @localeData.weekdays[index] + '）'\n      else\n        return @localeData.weekdays[index]\n\n  formatDate: (data)->\n    year = data.getFullYear()\n    month = ('0' + (data.getMonth() + 1)).slice(-2)\n    date = ('0' + data.getDate()).slice(-2)\n\n    return year + '-' + month + '-' + date\n\n  getNavigation: ()->\n    if @settings.navigation\n      previousWeekHtml = '<div id=\"ats-prev-week-container\" class=\"ats-nav\">' + @prevElem.outerHTML + '</div>'\n      nextWeekHtml = '<div id=\"ats-next-week-container\" class=\"ats-nav\">' + @nextElem.outerHTML + '</div>'\n\n      if not @defaultNav\n        previousWeekHtml = ''\n        nextWeekHtml = ''\n    else\n      previousWeekHtml = ''\n      nextWeekHtml = ''\n\n    switch @localeData.code\n      when 'ja'\n        dateHtmlText = @getYearName(@settings.startDate.getFullYear()) + ' ' + @getMonthName(@settings.startDate.getMonth())\n      else\n        dateHtmlText = @getMonthName(@settings.startDate.getMonth()) + ', ' + @getYearName(@settings.startDate.getFullYear())\n\n    dateHtml = '<div id=\"ats-current-date-container\">\n    <div class=\"ats-current-date__text\">' + dateHtmlText + '</div>'\n\n    if @settings.calendar\n      dateHtml += '<div id=\"ats-calendar-container\" class=\"ats-current-date__calendar\">\n      <label id=\"ats-calendar\" class=\"ats-calendar\"><img id=\"ats-calendar-icon\" class=\"ats-calendar__icon\" src=\"' + @settings.iconFilePath + @settings.iconCalendar.fileName + '\" width=\"' + @settings.iconCalendar.width + '\" height=\"' + @settings.iconCalendar.height + '\" data-toggle /><input id=\"ats-calendar-input\" class=\"ats-calendar__input\" name=\"ats-selected-date\" type=\"text\" value=\"' + @formatDate(@settings.startDate) + '\" data-input readonly></label>\n      </div>'\n\n    dateHtml += '</div>'\n\n    navHtml = previousWeekHtml + ' ' + dateHtml + ' ' + nextWeekHtml\n\n    return navHtml\n\n  getCurrentDate: ()->\n    now = new Date()\n    nowDate = @formatDate(now)\n\n    return nowDate\n\n  getCurrentTime: (index)->\n    time = new Date(@getCurrentDate() + 'T00:00:00')\n    time.setMinutes(index * @settings.slotSpan)\n\n    return time\n\n  getTimeLine: ()->\n    tmp = ''\n\n    for i in [@startNum...@endNum]\n      tmp += '<div id=\"ats-time-line-' + i + '\" class=\"ats-time-line\">\n      <div class=\"ats-time-line-number\">' + ('0' + @getCurrentTime(i).getHours()).slice(-2) + ':' + ('0' + @getCurrentTime(i).getMinutes()).slice(-2) + '</div>\n      </div>'\n\n    ret = tmp\n\n    return ret\n\n  getDatesHeader: ()->\n    tmp = ''\n\n    for i in [0...@settings.displayDateCount]\n      date = @setDate(i)\n\n      classList = []\n\n      classList.push('ats-date-heading')\n\n      if date.getDay() is 0\n        classList.push('ats__sunday')\n      else if date.getDay() is 6\n        classList.push('ats__saturday')\n      else\n        classList.push('ats__weekday')\n\n      tmp += '<div id=\"ats-date-heading-' + i + '\" class=\"' + classList.join(' ') + '\" data-date=\"' + @formatDate(date) + '\" data-date-index=\"' + i + '\">\n        <div class=\"ats-date-number\">' + date.getDate() + '</div>\n        <div class=\"ats-date-text\">' + @getWeekdayName(date.getDay()) + '</div>\n      </div>'\n\n    ret = tmp\n\n    return ret\n\n  getAvailableTimeSlots: ()->\n    tmp = ''\n    now = new Date()\n\n    endDate = new Date(@settings.endDate)\n    endDate.setHours(24, 0, 0, 0)\n\n    for i in [0...@settings.displayDateCount]\n      tmpTimes = ''\n      mark = ''\n      date = @setDate(i)\n\n      m = date.getDay()\n\n      for j in [@startNum...@endNum]\n        isAvalable = false\n        isPast = false\n        isOutOfRange = false\n        isBusinessHours = false\n\n        className = 'ats-time-slot'\n\n        if typeof @settings.businessHours[0] is 'object'\n          l = 0\n\n        for k in [0...@settings.availabileTimeSlots[i]['data'].length]\n          availableDate = new Date(@settings.availabileTimeSlots[i]['date'] + 'T' + @settings.availabileTimeSlots[i]['data'][k]['time']+':00')\n          slotDate = new Date(@formatDate(date) + 'T' + ('0' + @getCurrentTime(j).getHours()).slice(-2) + ':' + ('0' + @getCurrentTime(j).getMinutes()).slice(-2)+':00')\n\n          if availableDate.getTime() is slotDate.getTime()\n            isAvalable = true\n\n            if @settings.displayAvailableCount is true\n              if @settings.availabileTimeSlots[i]['data'][k]['count'] isnt undefined\n                count = @settings.availabileTimeSlots[i]['data'][k]['count']\n              else\n                count = 0\n\n          if slotDate.getTime() - now.getTime() < 0\n            isAvalable = false\n            isPast = true\n\n          if endDate isnt ''\n            if slotDate.getTime() - endDate.getTime() > 0\n              isAvalable = false\n              isOutOfRange = true\n\n          businessHoursStart = new Date(date)\n          businessHoursEnd = new Date(date)\n\n          if typeof @settings.businessHours[0] is 'number' or typeof @settings.businessHours[0] is 'string'\n            businessHoursStart.setHours(@businessHours[0][0], @businessHours[0][1], @businessHours[0][2], @businessHours[0][3])\n            businessHoursEnd.setHours(@businessHours[1][0], @businessHours[1][1], @businessHours[1][2], @businessHours[1][3])\n\n          if typeof @settings.businessHours[0] is 'object'\n            if @businessHours.length >= @daysPerWeek\n              currentBusinessHours = @businessHours[m][l]\n\n              if currentBusinessHours isnt undefined and l < @businessHours[m].length\n                businessHoursStart.setHours(currentBusinessHours[0][0], currentBusinessHours[0][1], currentBusinessHours[0][2], currentBusinessHours[0][3])\n                businessHoursEnd.setHours(currentBusinessHours[1][0], currentBusinessHours[1][1], currentBusinessHours[1][2], currentBusinessHours[1][3])\n            else\n              currentBusinessHours = @businessHours[l]\n\n              if l < @businessHours.length\n                businessHoursStart.setHours(currentBusinessHours[0][0], currentBusinessHours[0][1], currentBusinessHours[0][2], currentBusinessHours[0][3])\n                businessHoursEnd.setHours(currentBusinessHours[1][0], currentBusinessHours[1][1], currentBusinessHours[1][2], currentBusinessHours[1][3])\n\n          if slotDate.getTime() - businessHoursStart.getTime() >= 0\n            isBusinessHours = true\n          else\n            isBusinessHours = false\n\n          if slotDate.getTime() - businessHoursEnd.getTime() >= 0\n            isBusinessHours = false\n\n          if typeof @settings.businessHours[0] is 'object'\n            if slotDate.getTime() >= businessHoursEnd.getTime()\n              if currentBusinessHours isnt undefined\n                if @businessHours.length >= @daysPerWeek\n                  if l < @businessHours[m].length\n                    l++\n                else\n                  if l < @businessHours.length\n                    l++\n\n        if isPast\n          className += ' ats-time-slot__past'\n          isPast = false\n\n        if isOutOfRange\n          className += ' ats-time-slot__out-of-range'\n          isOutOfRange = false\n          isBusinessHours = false\n\n        if isBusinessHours\n          className += ' ats-time-slot__business-hours'\n\n        if not isAvalable\n          mark = '<p class=\"ats-icon\"><img class=\"ats-icon-image\" src=\"' + @settings.iconFilePath + @settings.iconCross.fileName + '\" width=\"' + @settings.iconCross.width + '\" height=\"' + @settings.iconCross.height + '\" /></p>'\n        else\n          mark = '<p class=\"ats-icon\"><img class=\"ats-icon-image\" src=\"' + @settings.iconFilePath + @settings.iconCircle.fileName + '\" width=\"' + @settings.iconCircle.width + '\" height=\"' + @settings.iconCircle.height + '\" /></p>'\n\n          if @settings.displayAvailableCount is true\n            mark += '<p class=\"ats-count\">(' + count + ')</p>'\n\n          if isBusinessHours\n            className += ' ats-time-slot__available'\n\n        if not isBusinessHours\n          mark = ''\n\n        if slotDate isnt undefined\n          timeText = ('0' + slotDate.getHours()).slice(-2) + ':' + ('0' + slotDate.getMinutes()).slice(-2)\n\n          timeIndex = @settings.availabileTimeSlots[i]['data'].findIndex((elem)-> elem.time is timeText)\n\n        timeIndexText = ' data-date-index=\"' + i + '\"'\n\n        if timeIndex > -1\n          timeIndexText += ' data-time-index=\"' + timeIndex + '\"'\n\n        tmpTimes += '<div class=\"' + className + '\" data-time=\"' + timeText + '\" data-date=\"' + @formatDate(date) + '\"' + timeIndexText + ' ontouchstart=\"\">' + mark + '</div>'\n\n      className = 'ats-time-slot-container'\n\n      if date.getDay() is 0\n        className += ' ats__sunday'\n      else if date.getDay() is 6\n        className += ' ats__saturday'\n      else\n        className += ' ats__weekday'\n\n      tmp += '<div id=\"ats-time-slot-container-' + i + '\" class=\"' + className + '\">' + tmpTimes + '</div>'\n\n    return tmp\n\n  setAvailableTimeSlots: (data)->\n    @timeSlotSourceType = typeof data\n\n    if @timeSlotSourceType is 'string'\n      queryStrings = new URLSearchParams(data.split('?')[1])\n\n      sourceUrl = data.split('?')[0] + '?'\n\n      if data.split('?')[1] isnt undefined\n        queryStrings.forEach((val, key)=>\n          if key is 'start'\n            sourceUrl += key + '=' + @formatDate(@setDate(0))\n          else\n            sourceUrl += key + '=' + val\n\n          sourceUrl += '&'\n        )\n\n        sourceUrl = sourceUrl.slice(0, -1)\n      else\n        sourceUrl += 'start=' + @formatDate(@setDate(0))\n\n      data = sourceUrl\n\n      request = new XMLHttpRequest()\n      request.open('GET', data, true)\n\n      request.onload = ()=>\n        if request.status >= 200 and request.status < 400\n          data = JSON.parse(request.responseText)\n\n          @settings.availabileTimeSlots = data.data\n\n          @render()\n\n          return\n        else\n\n      request.onerror = ()->\n\n      request.send()\n\n    if @timeSlotSourceType is 'object'\n      @settings.availabileTimeSlots = data.data\n\n      @render()\n\n      return\n\n  clearAvailableTimeSlots: ()->\n    @settings.availabileTimeSlots = [[], [], [], [], [], [], []]\n\n  getAvailableTimes: ()->\n    tmp = ''\n    now = new Date()\n\n    for i in [0...@settings.displayDateCount]\n      tmpTimes = ''\n      mark = ''\n      date = @setDate(i)\n      isPast = false\n\n      m = date.getDay()\n\n      containerClassList = ['ats-time-slot-container']\n\n      if date.getDay() is 0\n        containerClassList.push('ats__sunday')\n      else if date.getDay() is 6\n        containerClassList.push('ats__saturday')\n      else\n        containerClassList.push('ats__weekday')\n\n      tmp += '<div class=\"' + containerClassList.join(' ') + '\">'\n\n      @settings.availabileTimeSlots[i]['data'].forEach((elem, index)=>\n        slotClassList = ['ats-time-slot']\n\n        if new Date(@formatDate(date) + 'T' + elem).getTime() - now.getTime() < 0\n          slotClassList.push('ats-time-slot__past')\n          isPast = true\n        else\n          slotClassList.push('ats-time-slot__available')\n          isPast = false\n\n        if isPast isnt true\n          tmp += '<div class=\"' + slotClassList.join(' ') + '\" data-time=\"' + elem + '\" data-date=\"' + @formatDate(date) + '\">'\n          tmp += elem\n\n          if @settings.displayAvailableCount is true\n            if @settings.availabileTimeSlots[i]['count'] isnt undefined\n              count = @settings.availabileTimeSlots[i]['count'][index]\n\n              tmp += '<p class=\"ats-count\">(' + count + ')</p>'\n\n          tmp += '</div>'\n      )\n\n      tmp += '</div>'\n\n    return tmp\n\n  clickPrevWeekHandler: ()=>\n    currentDateTime = new Date(@getCurrentDate()).getTime()\n    startDateTime = new Date(document.getElementById('ats-date-heading-0').getAttribute('data-date')).getTime()\n\n    if startDateTime - currentDateTime <= 0\n      document.getElementById(@prevElem.id).classList.add('is-disable')\n      return false\n\n    @settings.startDate = @setDate(@settings.displayDateCount * -1)\n    @clearAvailableTimeSlots()\n\n    if @timeSlotSourceType is 'string'\n      @setAvailableTimeSlots(@settings.availabileTimeSlotResource)\n\n    if typeof @settings.onClickNavigator is 'function'\n      @settings.onClickNavigator(direction = 'prev')\n\n  clickPrevWeek: ()->\n    currentDateTime = new Date(@getCurrentDate()).getTime()\n    startDateTime = new Date(document.getElementById('ats-date-heading-0').getAttribute('data-date')).getTime()\n\n    if startDateTime - currentDateTime <= 0\n      document.getElementById(@prevElem.id).classList.add('is-disable')\n\n    document.getElementById(@prevElem.id).addEventListener('click', @clickPrevWeekHandler, false)\n\n  clickNextWeekHander: ()=>\n    @settings.startDate = @setDate(@settings.displayDateCount)\n    @clearAvailableTimeSlots()\n\n    if @timeSlotSourceType is 'string'\n      @setAvailableTimeSlots(@settings.availabileTimeSlotResource)\n\n    document.getElementById(@prevElem.id).classList.remove('is-disable')\n\n    if typeof @settings.onClickNavigator is 'function'\n      @settings.onClickNavigator(direction = 'next')\n\n  clickNextWeek: ()->\n    document.getElementById(@nextElem.id).addEventListener('click', @clickNextWeekHander, false)\n\n  clickAvailableTimeSlot: ()->\n    Array.from(document.getElementsByClassName('ats-time-slot__available')).forEach((target)=>\n      target.addEventListener('click', (e)=>\n        date = target.getAttribute('data-date')\n        time = target.getAttribute('data-time')\n\n        dateIndex = target.getAttribute('data-date-index')\n        timeIndex = target.getAttribute('data-time-index')\n\n        tmp = {}\n        tmp['date'] = date\n        tmp['data'] = @settings.availabileTimeSlots[dateIndex]['data'][timeIndex]\n\n        if target.classList.contains('is-selected')\n          target.classList.remove('is-selected')\n          idx = @settings.selectedDates.findIndex((elem)-> elem.data.time is tmp.data.time)\n\n          localStorage.removeItem('ats_selected_date')\n          localStorage.removeItem('ats_selected_time')\n\n          if idx isnt -1\n            @settings.selectedDates.splice(idx, 1)\n        else\n          if @settings.isMultiple\n            target.classList.add('is-selected')\n            @settings.selectedDates.push(tmp)\n          else\n            @settings.selectedDates.pop()\n\n            localStorage.setItem('ats_selected_date', date)\n            localStorage.setItem('ats_selected_time', time)\n\n            if not @settings.selectedDates.length\n              Array.from(document.getElementsByClassName('ats-time-slot__available')).forEach((target)->\n                target.classList.remove('is-selected')\n              )\n\n              target.classList.add('is-selected')\n              @settings.selectedDates.push(tmp)\n\n        if typeof @settings.onClickTimeSlot is 'function'\n          @settings.onClickTimeSlot(@settings.selectedDates)\n      )\n    )\n\n  updateTimeSlot: ()->\n    selectedDate = localStorage.getItem('ats_selected_date')\n    selectedTime = localStorage.getItem('ats_selected_time')\n\n    if selectedDate isnt null and selectedTime isnt null\n      Array.from(document.getElementsByClassName('ats-time-slot')).forEach((target)->\n        if target.getAttribute('data-date') is selectedDate and target.getAttribute('data-time') is selectedTime\n          if target.classList.contains('ats-time-slot__available')\n            target.classList.add('is-selected')\n          else\n            localStorage.removeItem('ats_selected_date')\n            localStorage.removeItem('ats_selected_time')\n      )\n\n  clickCalendar: ()->\n    document.getElementById('ats-calendar').addEventListener('change', (e)=>\n      @settings.startDate = new Date(e.target.value)\n      @setAvailableTimeSlots(@settings.availabileTimeSlotResource)\n    )\n\n  changeContainerHeight: ()->\n    if typeof @settings.scrollable is 'boolean'\n      document.getElementById('ats-week-container').style.height = (\n        window.innerHeight -\n        document.getElementById('ats-week-container').getBoundingClientRect().top -\n        document.getElementById('ats-week-container').getBoundingClientRect().x\n      ) + 'px'\n    if typeof @settings.scrollable is 'string'\n      document.getElementById('ats-week-container').style.height = @settings.scrollable\n\n  resizeContainerHeightHandler: ()=>\n    setTimeout(()=>\n      @changeContainerHeight()\n      return\n    , 100)\n    return\n\n  resizeContainerHeight: ()->\n    window.addEventListener('resize', @resizeContainerHeightHandler, false)\n\n  render: ()->\n    ret = '<div id=\"ats-container\">\n      <div id=\"ats-nav-container\">' + @getNavigation() + '</div>'\n    ret += '<div id=\"ats-week-container\"'\n\n    classList = []\n\n    if @settings.view is 'availableTimeSlots'\n      classList.push('ats-view__available-time-slots')\n\n    if @settings.view is 'onlyAvailableTimes'\n      classList.push('ats-view__only-available-times')\n\n    if @settings.scrollable\n      classList.push('ats__scrollable')\n\n    ret += ' class=\"' + classList.join(' ') + '\"'\n\n    ret += '>'\n    ret += '<div id=\"ats-week-header\">\n    <div id=\"ats-dates-container\">'\n    ret += @getDatesHeader() + '</div>\n    </div>\n    <div id=\"ats-week-body\">'\n\n    if @settings.view is 'availableTimeSlots'\n      ret += '<div id=\"ats-times-container\" class=\"ats-time-line-container\">' + @getTimeLine() + '</div>\n      <div id=\"ats-available-time-container\">' + @getAvailableTimeSlots() + '</div>'\n\n    if @settings.view is 'onlyAvailableTimes'\n      ret += '<div id=\"ats-available-time-container\">' + @getAvailableTimes() + '</div>'\n\n    ret += '</div>\n    </div>\n    </div>'\n\n    @target.innerHTML = ret\n\n    if @settings.holidays isnt ''\n      @updateHoliday()\n\n    @updateTimeSlot()\n\n    if @settings.navigation\n      document.getElementById(@prevElem.id).removeEventListener('click', @clickPrevWeekHandler, false)\n      document.getElementById(@nextElem.id).addEventListener('click', @clickNextWeekHander, false)\n\n      @clickPrevWeek()\n      @clickNextWeek()\n\n    @clickAvailableTimeSlot()\n\n    if @settings.scrollable\n      @changeContainerHeight()\n\n    if @settings.resizable\n      window.removeEventListener('resize', @resizeContainerHeightHandler, false)\n\n      @resizeContainerHeight()\n\n    if @settings.calendar\n      @settings.initDatePicker()\n\n      if @settings.initDatePicker() isnt undefined\n        @settings.destroyDatePicker()\n\n      @clickCalendar()\n\n    pastScrollTop = localStorage.getItem('ats_scrollTop')\n\n    if pastScrollTop isnt null\n      document.getElementById('ats-week-body').scrollTop = pastScrollTop\n\n    document.getElementById('ats-week-body').addEventListener('scroll', ()->\n      localStorage.setItem('ats_scrollTop', this.scrollTop)\n    )\n\n  updateHoliday: ()->\n    request = new XMLHttpRequest()\n    request.open('GET', @settings.holidays, true)\n\n    request.onload = ()->\n      if request.status >= 200 and request.status < 400\n        data = JSON.parse(request.responseText)\n\n        Object.keys(data).forEach((key)->\n          headings = document.getElementsByClassName('ats-date-heading')\n          slots = document.getElementsByClassName('ats-time-slot-container')\n\n          Array.from(headings).forEach((target, index)->\n            current = target.getAttribute('data-date')\n\n            if key is current\n              headings[index].classList.add('ats__holiday')\n              slots[index].classList.add('ats__holiday')\n          )\n        )\n      else\n\n    request.onerror = ()->\n\n    request.send()\n\n  init: ()->\n    @setAvailableTimeSlots(@settings.availabileTimeSlotResource)"]}