{"version":3,"file":"main.js","sourceRoot":"../../src/cs/","sources":["main.coffee"],"names":[],"mappings":"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","sourcesContent":["###\navailable-time-slots\n\nCopyright (c) 2022 Yoshiaki Murakami(https://github.com/ysakmrkm)\n\nThis software is released under the MIT License.\nhttp://opensource.org/licenses/mit-license.php\n###\n\nclass AvailableTimeSlots\n  constructor: (target, options)->\n    @prevHtml = '<div id=\"ats-prev-week\" class=\"ats-nav__item ats-nav__item__prev\"><</div>'\n    @nextHtml = '<div id=\"ats-next-week\" class=\"ats-nav__item ats-nav__item__next\">></div>'\n    @defaults = {\n      availabileTimeSlotResource: '',\n      availabileTimeSlots: [[], [], [], [], [], [], []],\n      isMultiple: false\n      navigation: true\n      prevHtml: @prevHtml\n      nextHtml: @nextHtml\n      selectedDates: []\n      startDate: new Date()\n      slotMinTime: '00:00'\n      slotMaxTime: '24:00'\n      slotSpan: 30\n      businessHours: [0,  23]\n      locale: 'en'\n      scrollable: false\n      calendar: false\n      iconFilePath: './image/'\n      iconCalendar: {\n        fileName: 'calendar.svg',\n        width: 40,\n        height: 40\n      },\n      iconCross: {\n        fileName: 'cross.svg',\n        width: 20,\n        height: 20\n      },\n      iconCircle: {\n        fileName: 'circle.svg',\n        width: 20,\n        height: 20\n      },\n      onClickTimeSlot: ()->\n      onClickNavigator: ()->\n    }\n    @settings = Object.assign({}, @defaults, options)\n\n    slotBaseTime = new Date()\n    slotBaseTime.setHours(0, 0, 0, 0)\n\n    slotMinTime = new Date()\n    slotMinTimeArray = @settings.slotMinTime.replace(/0+(?=[0-9])/g, '').split(':')\n    slotMinTime.setHours(slotMinTimeArray[0], slotMinTimeArray[1], 0, 0)\n\n    slotMaxTime = new Date()\n    slotMaxTimeArray = @settings.slotMaxTime.replace(/0+(?=[0-9])/g, '').split(':')\n    slotMaxTime.setHours(slotMaxTimeArray[0], slotMaxTimeArray[1], 0, 0)\n\n    businessHoursStart = new Date()\n    businessHoursStart.setHours(@settings.businessHours[0], 0, 0, 0)\n    @businessHoursStart = businessHoursStart\n\n    businessHoursEnd = new Date()\n    businessHoursEnd.setHours(@settings.businessHours[1], 0, 0, 0)\n    @businessHoursEnd = businessHoursEnd\n\n    @startNum = Math.floor((slotMinTime.getTime() - slotBaseTime.getTime()) / (1000 * 60)) / @settings.slotSpan\n    @endNum = Math.floor((slotMaxTime.getTime() - slotBaseTime.getTime()) / (1000 * 60)) / @settings.slotSpan\n    @target = target\n    @localeData = locales.find((u)=> u.code is @settings.locale)\n    @initialStartDate = @settings.startDate\n\n  setDate: (days)->\n    date = new Date(@settings.startDate.valueOf())\n    date.setDate(date.getDate() + days)\n    return date\n\n  getYearName: (year)->\n    switch @localeData.code\n      when 'ja'\n        return year + '年'\n      else\n        return year\n\n  getMonthName: (index)->\n    switch @localeData.code\n      when 'ja'\n        return @localeData.months[index]\n      else\n        return @localeData.months[index]\n\n  getWeekdayName: (index)->\n    switch @localeData.code\n      when 'ja'\n        return '（' + @localeData.weekdays[index] + '）'\n      else\n        return @localeData.weekdays[index]\n\n  formatDate: (data)->\n    date = '' + data.getDate()\n    month = '' + (data.getMonth() + 1)\n    year = data.getFullYear()\n\n    if date.length < 2\n      date = '0' + date\n\n    if month.length < 2\n      month = '0' + month\n\n    return year + '-' + month + '-' + date\n\n  getNavigation: ()->\n    if @settings.navigation\n      previousWeekHtml = '<div id=\"ats-prev-week-container\" class=\"ats-nav\">' + @settings.prevHtml + '</div>'\n      nextWeekHtml = '<div id=\"ats-prev-week-container\" class=\"ats-nav\">' + @settings.nextHtml + '</div>'\n    else\n      previousWeekHtml = ''\n      nextWeekHtml = ''\n\n    switch @localeData.code\n      when 'ja'\n        dateHtmlText = @getYearName(@settings.startDate.getFullYear()) + ' ' + @getMonthName(@settings.startDate.getMonth())\n      else\n        dateHtmlText = @getMonthName(@settings.startDate.getMonth()) + ', ' + @getYearName(@settings.startDate.getFullYear())\n\n    dateHtml = '<div id=\"ats-current-date-container\">\n    <div class=\"ats-current-date__text\">' + dateHtmlText + '</div>'\n\n    if @settings.calendar\n      dateHtml += '<div id=\"ats-calendar-container\" class=\"ats-current-date__calendar\">\n      <label id=\"ats-calendar\" class=\"ats-calendar\"><img id=\"ats-calendar-icon\" class=\"ats-calendar__icon\" src=\"' + @settings.iconFilePath + @settings.iconCalendar.fileName + '\" width=\"' + @settings.iconCalendar.width + '\" height=\"' + @settings.iconCalendar.height + '\" data-toggle /><input id=\"ats-calendar-input\" class=\"ats-calendar__input\" name=\"ats-selected-date\" type=\"text\" value=\"' + @formatDate(@settings.startDate) + '\" data-input></label>\n      </div>'\n\n    dateHtml += '</div>'\n\n    navHtml = previousWeekHtml + ' ' + dateHtml + ' ' + nextWeekHtml\n\n    return navHtml\n\n  getCurrentDate: ()->\n    now = new Date()\n    nowDateTime = now.toISOString()\n    nowDate = nowDateTime.split('T')[0]\n\n    return nowDate\n\n  getCurrentTime: (index)->\n    time = new Date(@getCurrentDate() + 'T00:00:00')\n    time.setMinutes(index * @settings.slotSpan)\n\n    return time\n\n  getTimeLine: ()->\n    tmp = ''\n\n    for i in [@startNum...@endNum]\n      tmp += '<div id=\"ats-time-line-' + i + '\" class=\"ats-time-line\">\n      <div class=\"ats-time-line-number\">' + ('0' + @getCurrentTime(i).getHours()).slice(-2) + ':' + ('0' + @getCurrentTime(i).getMinutes()).slice(-2) + '</div>\n      </div>'\n\n    ret = tmp\n\n    return ret\n\n  getDatesHeader: ()->\n    tmp = ''\n\n    for i in [0...7]\n      date = @setDate(i)\n\n      className = 'ats-date-heading'\n\n      if date.getDay() is 0\n        className += ' ats__sunday'\n      else if date.getDay() is 6\n        className += ' ats__saturday'\n      else\n        className += ' ats__weekday'\n\n      tmp += '<div id=\"ats-date-heading-' + i + '\" class=\"' + className + '\" data-date=\"' + @formatDate(date) + '\">\n        <div class=\"ats-date-number\">' + date.getDate() + '</div>\n        <div class=\"ats-date-text\">' + @getWeekdayName(date.getDay()) + '</div>\n      </div>'\n\n    ret = tmp\n\n    return ret\n\n  getAvailableTimeSlots: ()->\n    tmp = ''\n    now = new Date()\n\n    for i in [0...7]\n      tmpTimes = ''\n      mark = ''\n      date = @setDate(i)\n\n      for j in [@startNum...@endNum]\n        isAvalable = false\n        isPast = false\n        isBusinessHours = false\n\n        className = 'ats-time-slot'\n\n        for k in [0...@settings.availabileTimeSlots[i]['data'].length]\n          availableDate = new Date(@settings.availabileTimeSlots[i]['date'] + 'T' + @settings.availabileTimeSlots[i]['data'][k]+':00')\n          slotDate = new Date(date.toISOString().split('T')[0] + 'T' + ('0' + @getCurrentTime(j).getHours()).slice(-2) + ':' + ('0' + @getCurrentTime(j).getMinutes()).slice(-2)+':00')\n\n          if availableDate.getTime() is slotDate.getTime()\n            isAvalable = true\n\n          if slotDate.getTime() - now.getTime() < 0\n            isAvalable = false\n            isPast = true\n\n          businessHoursMonth = date.toISOString().split('T')[0].split('-')[1] - 1\n          businessHoursDate = date.toISOString().split('T')[0].split('-')[2]\n\n          @businessHoursStart.setMonth(businessHoursMonth)\n          @businessHoursStart.setDate(businessHoursDate)\n          @businessHoursEnd.setMonth(businessHoursMonth)\n          @businessHoursEnd.setDate(businessHoursDate)\n\n          if slotDate.getTime() - @businessHoursStart.getTime() >= 0\n            isBusinessHours = true\n          else\n            isAvalable = false\n\n          if slotDate.getTime() - @businessHoursEnd.getTime() >= 0\n            isBusinessHours = false\n            isAvalable = false\n\n        if isPast\n          className += ' ats-time-slot__past'\n          isPast = false\n\n        if isBusinessHours\n          className += ' ats-time-slot__business-hours'\n\n        if not isAvalable\n          mark = '<img src=\"' + @settings.iconFilePath + @settings.iconCross.fileName + '\" width=\"' + @settings.iconCross.width + '\" height=\"' + @settings.iconCross.height + '\" />'\n        else\n          mark = '<img src=\"' + @settings.iconFilePath + @settings.iconCircle.fileName + '\" width=\"' + @settings.iconCircle.width + '\" height=\"' + @settings.iconCircle.height + '\" />'\n          className += ' ats-time-slot__available'\n\n        if not isBusinessHours\n          mark = ''\n\n        tmpTimes += '<div class=\"' + className + '\" data-time=\"' + ('0' + slotDate.getHours()).slice(-2) + ':' + ('0' + slotDate.getMinutes()).slice(-2) + '\" data-date=\"' + @formatDate(date) + '\">' + mark + '</div>'\n\n      className = 'ats-time-slot-container'\n\n      if date.getDay() is 0\n        className += ' ats__sunday'\n      else if date.getDay() is 6\n        className += ' ats__saturday'\n      else\n        className += ' ats__weekday'\n\n      tmp += '<div id=\"ats-time-slot-container-' + i + '\" class=\"' + className + '\">' + tmpTimes + '</div>'\n\n    return tmp\n\n  setAvailableTimeSlots: (data)->\n    if typeof data is 'string'\n      queryStrings = new URLSearchParams(data.split('?')[1])\n\n      sourceUrl = data.split('?')[0] + '?'\n\n      if data.split('?')[1] isnt undefined\n        queryStrings.forEach((val, key)=>\n          if key is 'start'\n            sourceUrl += key + '=' + @setDate(0).toISOString().split('T')[0]\n          else\n            sourceUrl += key + '=' + val\n\n          sourceUrl += '&'\n        )\n\n        sourceUrl = sourceUrl.slice(0, -1)\n      else\n        sourceUrl += 'start=' + @setDate(0).toISOString().split('T')[0]\n\n      data = sourceUrl\n\n      request = new XMLHttpRequest()\n      request.open('GET', data, true)\n\n      request.onload = ()=>\n        if request.status >= 200 and request.status < 400\n          data = JSON.parse(request.responseText)\n\n          @settings.availabileTimeSlots = data.data\n\n          @render()\n        else\n\n      request.onerror = ()->\n\n      request.send()\n\n    if typeof data is 'object'\n      @settings.availabileTimeSlots = data.data\n\n      @render()\n\n  clearAvailableTimeSlots: ()->\n    @settings.availabileTimeSlots = [[], [], [], [], [], [], []]\n\n  clickPrevWeek: ()->\n    currentDateTime = new Date(@getCurrentDate()).getTime()\n    startDateTime = new Date(document.getElementById('ats-date-heading-0').getAttribute('data-date')).getTime()\n\n    if startDateTime - currentDateTime < 0\n      document.getElementById('ats-prev-week').classList.add('is-disable')\n\n    document.getElementById('ats-prev-week').addEventListener('click', (e)=>\n      @settings.startDate = @setDate(-7)\n      @clearAvailableTimeSlots()\n      @setAvailableTimeSlots(@settings.availabileTimeSlotResource)\n\n      if typeof @settings.onClickNavigator is 'function'\n        @settings.onClickNavigator(direction = 'prev')\n    )\n\n  clickNextWeek: ()->\n    document.getElementById('ats-next-week').addEventListener('click', (e)=>\n      @settings.startDate = @setDate(7)\n      @clearAvailableTimeSlots()\n      @setAvailableTimeSlots(@settings.availabileTimeSlotResource)\n\n      document.getElementById('ats-prev-week').classList.remove('is-disable')\n\n      if typeof @settings.onClickNavigator is 'function'\n        @settings.onClickNavigator(direction = 'next')\n    )\n\n  clickAvailableTimeSlot: ()->\n    Array.from(document.getElementsByClassName('ats-time-slot__available')).forEach((target)=>\n      target.addEventListener('click', (e)=>\n        date = target.getAttribute('data-date')\n        time = target.getAttribute('data-time')\n        tmp = date + ' ' + time\n        if target.classList.contains('is-selected')\n          target.classList.remove('is-selected')\n          idx = @settings.selectedDates.indexOf(tmp)\n\n          localStorage.removeItem('ats_selected_date')\n          localStorage.removeItem('ats_selected_time')\n\n          if idx isnt -1\n            @settings.selectedDates.splice(idx, 1)\n        else\n          if @settings.isMultiple\n            target.classList.add('is-selected')\n            @settings.selectedDates.push(tmp)\n          else\n            @settings.selectedDates.pop()\n\n            localStorage.setItem('ats_selected_date', date)\n            localStorage.setItem('ats_selected_time', time)\n\n            if not @settings.selectedDates.length\n              Array.from(document.getElementsByClassName('ats-time-slot__available')).forEach((target)->\n                target.classList.remove('is-selected')\n              )\n\n              target.classList.add('is-selected')\n              @settings.selectedDates.push(tmp)\n\n        if typeof @settings.onClickTimeSlot is 'function'\n          @settings.onClickTimeSlot(@settings.selectedDates)\n      )\n    )\n\n  updateTimeSlot: ()->\n    selectedDate = localStorage.getItem('ats_selected_date')\n    selectedTime = localStorage.getItem('ats_selected_time')\n\n    if selectedDate isnt null and selectedTime isnt null\n      Array.from(document.getElementsByClassName('ats-time-slot')).forEach((target)->\n        if target.getAttribute('data-date') is selectedDate and target.getAttribute('data-time') is selectedTime\n          if target.classList.contains('ats-time-slot__available')\n            target.classList.add('is-selected')\n          else\n            localStorage.removeItem('ats_selected_date')\n            localStorage.removeItem('ats_selected_time')\n      )\n\n  clickCalendar: ()->\n    flatpickr('#ats-calendar', {\n      wrap: true\n      minDate: @formatDate(@initialStartDate)\n    })\n\n    document.getElementById('ats-calendar').addEventListener('change', (e)=>\n      @settings.startDate = new Date(e.target.value)\n      @setAvailableTimeSlots(@settings.availabileTimeSlotResource)\n    )\n\n  changeContainerHeight: ()->\n    if typeof @settings.scrollable is 'boolean'\n      document.getElementById('ats-week-container').style.height = (\n        window.innerHeight -\n        document.getElementById('ats-week-container').getBoundingClientRect().top -\n        document.getElementById('ats-week-container').getBoundingClientRect().x\n      ) + 'px'\n    if typeof @settings.scrollable is 'string'\n      document.getElementById('ats-week-container').style.height = @settings.scrollable\n\n  render: ()->\n    ret = '<div id=\"ats-container\">\n      <div id=\"ats-nav-container\">' + @getNavigation() + '</div>'\n    ret += '<div id=\"ats-week-container\"'\n\n    if @settings.scrollable\n      ret += ' class=\"ats__scrollable\"'\n\n    ret += '>'\n    ret += '<div id=\"ats-week-header\">\n    <div id=\"ats-dates-container\">' + @getDatesHeader() + '</div>\n    </div>\n    <div id=\"ats-week-body\">\n    <div id=\"ats-times-container\">' + @getTimeLine() + '</div>\n    <div id=\"ats-available-time-container\">' + @getAvailableTimeSlots() + '</div>\n    </div>\n    </div>\n    </div>'\n\n    @target.innerHTML = ret\n\n    if @settings.holidays isnt ''\n      @updateHoliday()\n\n    @updateTimeSlot()\n\n    if @settings.navigation\n      @clickPrevWeek()\n      @clickNextWeek()\n\n    @clickAvailableTimeSlot()\n\n    if @settings.scrollable\n      @changeContainerHeight()\n\n    if @settings.calendar\n      @clickCalendar()\n\n  updateHoliday: ()->\n    request = new XMLHttpRequest()\n    request.open('GET', @settings.holidays, true)\n\n    request.onload = ()->\n      if request.status >= 200 and request.status < 400\n        data = JSON.parse(request.responseText)\n\n        Object.keys(data).forEach((key)->\n          headings = document.getElementsByClassName('ats-date-heading')\n          slots = document.getElementsByClassName('ats-time-slot-container')\n\n          Array.from(headings).forEach((target, index)->\n            current = target.getAttribute('data-date')\n\n            if key is current\n              headings[index].classList.add('ats__holiday')\n              slots[index].classList.add('ats__holiday')\n          )\n        )\n      else\n\n    request.onerror = ()->\n\n    request.send()\n\n  init: ()->\n    @setAvailableTimeSlots(@settings.availabileTimeSlotResource)"]}