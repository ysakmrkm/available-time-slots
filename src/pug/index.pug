extends _layout

block vars
  - var category = 'home'
  - var page = 'index'
  - var pageId = page
  - var pageClass = page+' '+category

block head
  link(rel='stylesheet', href='dist/css/styles.css')
  link(rel='stylesheet', href='https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css')

block tag
  #app

  p Selected:
    br
    span#selected-date

block script
  script(src='sample/js/data.js')
  script(src='dist/js/main.js')
  script(src='dist/js/locales.js')
  script(src='https://cdn.jsdelivr.net/npm/flatpickr')
  script.
    target = document.getElementById('app')

    date = new Date()
    date.setDate(date.getDate() - 1)

    settings = {
      businessHour: [8,  24],
      availabileTimeSlotResource: sampleData(date),
      startDate: date,
      holidays: 'https://holidays-jp.github.io/api/v1/date.json',
      scrollable: true,
      calendar: true,
      iconFilePath: 'sample/image/',
      onClickTimeSlot: function(data) {
        document.getElementById('selected-date').innerHTML = ''

        data.forEach(function (data, index) {
          document.getElementById('selected-date').innerHTML += data+'<br>';
        });
      },
      onClickNavigator: function(direction) {
        if(direction === 'next') {
          AvailableTimeSlots.setAvailableTimeSlots(sampleData(date.setDate(date.getDate() + 7)))
        }
        if(direction === 'prev') {
          AvailableTimeSlots.setAvailableTimeSlots(sampleData(date.setDate(date.getDate() - 7)))
        }
      }
    }

    AvailableTimeSlots = new AvailableTimeSlots(target, settings)

    AvailableTimeSlots.init()
